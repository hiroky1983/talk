# UX 向上計画書

`Todo/tasks.md` で定義された 3 つの主要課題に基づき、分析と改善プランを再構成しました。

## 1. UX の向上

### 概要

モバイルでの会話体験において、視覚的なフィードバック（リッチなアニメーション）を導入し、ユーザー体験を「Delightful」なものにする。

### 現状分析 (Analysis)

- **現状**: 音声会話中の画面が静的であり、AI の状態（聞いている、考えている、話している）が直感的に伝わりにくい。
- **課題**: ユーザーが「今話していいのか？」と不安になる。
- **解決策**: オーディオスペクトラム（波形アニメーション）を導入する。声の大きさやピッチに合わせてリアルタイムに反応する UI で、「AI の実在感」を演出する。

### ToDo (Action Items)

#### Priority: High (高)

- [ ] **[UI/UX]** 音声の振幅(metering)を取得するフックの実装
- [ ] **[UI/UX]** `react-native-reanimated` や `react-native-skia` を用いた波形アニメーションのプロトタイプ作成

#### Priority: Medium (中)

- [ ] **[UI/UX]** AI の状態（Listening, Thinking, Speaking）に応じたアニメーションモーフィングの実装

---

## 2. アプリのコンセプトの見直し

### 概要

「AI と選んだ言語でリアルタイム会話」から「母国語＋学びたい言語で教える AI 教師」へコンセプトをピボットし、学習の継続性を高める。

### 現状分析 (Analysis)

- **現状**: 最初からターゲット言語（英語など）のみで会話する設計。
- **課題**: 初心者にとってハードルが高く、課金ポイント（成功体験）に達する前に離脱する。
- **解決策**: ユーザーが詰まったら母国語でフォローする機能を導入。解説は母国語、実践はターゲット言語で行うハイブリッドな会話設計を模索する。

### ToDo (Action Items)

#### Priority: High (高)

- [ ] **[AI]** 「AI 教師」用システムプロンプトの作成（日本語と英語を適切に使い分ける指示）
- [ ] **[Design]** 母国語でのサポート介入タイミングの設計

#### Priority: Medium (中)

- [ ] **[Feature]** UI 上での日本語/英語字幕の切り替え機能デザイン
- [ ] **[Feature]** ユーザーの習熟度判定ロジックの検討

#### Priority: Low (低)

- [ ] **[Feature]** マルチ言語設定 UI の実装

---

## 3. モバイル側の音声が小さい

### 概要

特にプレミアムプラン（AI とのリアルタイム会話）における「音声の途切れ」と「音量の小ささ」という品質問題を解決し、Reliable（信頼できる）体験を提供する。

### 現状分析 (Analysis)

- **現状**: プレミアムプランでプツプツ途切れる、音量が小さい。実用に耐えないレベル。
- **原因仮説**: `Expo AV` ライブラリと Gemini Live API のストリーミング処理の相性が悪い、またはバッファリング制御の問題。
- **解決策**: 設計変更を含めた根本解決。`expo-audio` (New Architecture) への移行や、必要であればネイティブモジュールの実装を検討する。

### ToDo (Action Items)

#### Priority: High (高)

- [ ] **[Audio]** 音声途切れの原因詳細調査（Expo AV のバッファリング設定、ネットワークレイテンシ）
- [ ] **[Audio]** スピーカー出力の音量問題修正（Audio Session 設定、Audio Mode の確認）

#### Priority: Medium (中)

- [ ] **[Architecture]** `expo-audio` ライブラリへの移行検証
- [ ] **[Audio]** 受信音声データの正規化（Normalization）処理の追加検討

#### Priority: Low (低)

- [ ] **[Performance]** 音声処理パイプラインのさらなる最適化（WebAssembly 等）
