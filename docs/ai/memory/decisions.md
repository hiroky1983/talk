# AI Memory Bank: Decisions (ADR)

## [ADR-001] モバイルアプリの接続ポート変更

- **日付**: 2025-12-30
- **決定**: バックエンドのポート `8000` が OrbStack や他プロセスでブロックされやすいため、ホスト側では `8089` を使用し、Docker コンテナ内の `8000` へ転送する設定とした。
- **理由**: BE のコード（ポート番号）を変更せずに解決するため。
- **影響**: `mobile/package.json` の `EXPO_PUBLIC_API_URL` も `8089` に合わせる必要がある。

## [ADR-002] SafeAreaView の移行

- **日付**: 2025-12-30
- **決定**: `react-native` 標準の `SafeAreaView` を廃止し、`react-native-safe-area-context` に移行。
- **理由**: 標準のものが非推奨となったため。

## [ADR-003] モバイルオーディオのストリーミング再生方式

- **日付**: 2025-12-30
- **決定**: 従来のチャンクごとの `load/unload` を廃止し、受信データを結合して再生する「チャンク結合・バッファリング」方式を採用。
- **理由**: プレイヤー生成のオーバーヘッドによる音の途切れ（ギャップ）を解消するため。

## [ADR-004] 長期記憶・経験記憶（AI Memory Bank）の導入

- **日付**: 2025-12-30
- **決定**: リポジトリ内の `docs/ai/memory/` を AI エージェントの外部記憶として正式に定義。
- **理由**: セッションリセットによるコンテキスト喪失を防ぎ、ハマりどころや設計判断を継続的に継承させるため。
